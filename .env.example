# Datalab Marker API configuration

# Your API key from https://www.datalab.to
MARKER_API_KEY=your_api_key_here

# Optional: override API base URL if needed
# MARKER_BASE_URL=https://staging.datalab.to/api/v1
# Preferred explicit overrides (local/cloud)
# MARKER_LOCAL_BASE_URL=http://localhost:8000
# MARKER_CLOUD_BASE_URL=https://www.datalab.to/api/v1
# MARKER_LOCAL_ENDPOINT=/convert   # Use /marker if your local server supports multi-format
# MARKER_CLOUD_ENDPOINT=/marker

# Conversion timeout settings
# Timeout for PDF conversion in seconds (default: 3600 = 1 hour)
# Large PDFs may need 15-30 minutes, set higher for very large documents
# Set to 0 for NO TIMEOUT (wait indefinitely for local Marker and Pandoc)
CONVERSION_TIMEOUT=3600

# Connect timeout in seconds (keeps connect short even if read is unlimited)
# Effective for local Marker; read timeout follows CONVERSION_TIMEOUT
CONNECT_TIMEOUT=30

# Pipeline configuration
# Maximum number of worker processes for parallel conversion (default: 3)
# Optimized for i7-1165G7 (8 cores) - use 4 workers to avoid overload
MAX_WORKERS=4

# Chunk size for LLM processing (default: 4000 tokens)
CHUNK_SIZE=4000

# Overlap between chunks (default: 200 tokens)
OVERLAP_SIZE=200

# Target LLM model (gpt-3.5-turbo, gpt-4, claude-3, llama-2, gemini-pro, custom)
TARGET_LLM=custom

# Logging level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# Marker conversion toggles (override JSON conversion_settings)
# Defaults in code: USE_LLM=false, FORCE_OCR=false, STRIP_EXISTING_OCR=true, DISABLE_IMAGE_EXTRACTION=true, PAGINATE=false
# Set to true/false (values accepted: 1/0, true/false, yes/no, on/off)
MARKER_USE_LLM=false
MARKER_FORCE_OCR=false
MARKER_STRIP_EXISTING_OCR=true
MARKER_DISABLE_IMAGE_EXTRACTION=true
MARKER_PAGINATE=false

# Cloud polling (for cloud_marker): controls how long we wait for conversions
# max wait time â‰ˆ MAX_POLLS * POLL_INTERVAL seconds. Defaults: 300 * 2 = 600s
# Increase for very large PDFs or congested queues
# Set MAX_POLLS=0 for infinite polling (no limit)
MAX_POLLS=600
POLL_INTERVAL=2

# Marker multi-format routing (non-PDF): send these extensions to Marker instead of Pandoc
# Example: MARKER_DOCUMENT_FORMATS=epub,docx,html,pptx,xlsx,jpg,png
# Leave empty (or unset) to keep Pandoc for non-PDF formats
# MARKER_DOCUMENT_FORMATS=

